---
import type { Props } from "@astrojs/starlight/props";
import StarlightHead from "@astrojs/starlight/components/Head.astro";
import VtbotStarlight from "astro-vtbot/components/starlight/Base.astro";
---

<VtbotStarlight {...Astro.props} viewTransitionsFallback="animate">
  <StarlightHead {...Astro.props}><slot /></StarlightHead>
  <script>
    // Importación del script de scroll suave global
    import "@scripts/lenisSmoothScroll.js";
  </script>
</VtbotStarlight>

<style is:global>
  /* Suavizar la animación por defecto de Chrome para transiciones de vista */
  ::view-transition-group(root) {
    animation-duration: 250ms;
  }

  /* Evitar que los elementos se deslicen sobre las barras laterales */
  ::view-transition-group(*) {
    overflow: hidden;
  }
</style>

<script>
  /**
   * Optimización para el buscador de Starlight:
   * Evita que el scroll suave (Lenis) interfiera con el scroll interno 
   * de los resultados de búsqueda.
   */
  document.addEventListener("DOMContentLoaded", () => {
    const siteSearch = document.querySelector(
      "site-search"
    ) as HTMLElement | null;
    if (siteSearch) {
      siteSearch.setAttribute("data-lenis-prevent", "");
    }
  });
</script>